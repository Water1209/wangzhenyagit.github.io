---
layout: post
title: 《Hbae权威指南》读书笔记
category: 读书笔记
tags: Hbae
---

2013年9月的第一版，记录下自己的思考和新的知识。

### 列式数据库 ###

- 基于假设：“对于特定的查询不是所有的值都是必须的”。这个假设不仅说明了一般的适用场景，而且Hbase中很多的优化都是基于列的优化，使用的时候要先考虑是否用到了此特性，发挥了Hbase的特长。
- 如果有了以上假设，那么列式存储的优点是什么呢？——减少IO。而且列相似性很高，便于压缩，对于列式存储而言，压缩是很重的技术。压缩了，从磁盘的IO会减少，虽然会有一定的CPU的浪费，但是总性能是提高的。优点类似于CPU或IO，ES中也很多类似的设计，如文档同步后再进行索引重建，还有ES的FST结构。

### RDBMS的等待和死锁与事务和并发的关系 ###
> RDBMS的等待和死锁的出现频率，与事务和并发的增加并不是线性关系，准确地说，与并发数目的平方以及事务规模的3次方甚至5次方相关。

### MapReduce存在的一个理由 ###
Hbase并不是CPU密集型的，很多时候是在顺序的读磁盘。而Hbae+Spark或MapReduce能够利用机器上的CPU资源，更加充分的利用硬件。

### 行键在HFile中的定位作用 ###
> 把HFile打开并加载到内存中时，索引信息会优先加载到内存中，每个块的大小默认是64KB。

> 每一个HFile都有一个块索引，通过一个磁盘查找就可以实现查询。首先，在内存的快索引中进行二分查找，确定可能包含给定键的块，然后读取磁盘块找到实际要找的键。

### master的工作 ###
“主服务器不是实际数据存储或者检索路径的组成部分，它仅提供了负载均衡和集群管理，不为region服务器或者客户端提供任何的数据服务，因此是轻量级的服务器。此外，主服务器还提供了元数据的管理操作，如建表和创建列族”

路由信息，由Zk和root表和mete表提供，master并不提供。在ES中可以有专门做路由的transport节点，但是是否有类似的单独的master节点？至少索引创建时需要类似的节点的。